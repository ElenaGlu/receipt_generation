## _Веб-Приложение генерации чеков_

### Схема работы сервиса:
1. Сервис получает информацию о новом заказа, создаёт в БД чеки для всех принтеров точки указанной в заказе и ставит асинхронные задачи на генерацию PDF-файлов для этих чеков.
2. Асинхронный воркер с помощью wkhtmltopdf генерируют PDF-файл из HTML-шаблон.
3. Сервис опрашивается на наличие новых чеков. Опрос происходит по следующему пути: сначала запрашивается список чеков которые уже сгенерированы для конкретного принтера, после скачивается PDF-файл для каждого чека и отправляется на печать.

+ Реализована админка для моделей, с возможностью фильтровать заказы по принтеру и статусу.
  
``` 
printer_id - число (обязательный параметр)
Возможные варианты id принтера и соответствующий ему ресторан:
1	 group-A
2	 group-A
3	 group-B
4	 group-C
5	 group-D
```
title - уникальная строка содержит 4 цифры (0-9) (обязательный параметр)
```
restaurant - строка (обязательный параметр)
возможные варианты параметра:group-A,  group-B,  group-C,  group-D,  group-E
```

### Технологии:

Python3, Django, PostgreSQL, Celery, Redis, Poetry, Docker Compose, Pytest, Swagger, Postman

### Тестирование:

На основании тех.задания было выполнено тестирование двух основных поинтов приложения - create_receipt и get_receipt, на предмет корректности работы API (проверка полей, форматы запросов,ответов, обработка ошибок)

Выполнено:
1.	Анализ требований (схема работы сервиса, дока в swagger)
2.	Создание тестовой документации (тест-кейсы - https://disk.yandex.ru/i/Ba7Fsb-t9Iu6PA )
3.	Выполнение тестов (коллекция запросов в Postman - https://documenter.getpostman.com/view/34882852/2sAYdkFo5y )
4.	Фиксация дефектов – оформление баг-репортов (Yougile - https://ru.yougile.com/team/b1a16b295204/receipt_generation#MP-8 )

При тестировании использовались техники тест-дизайна: - разбиение на классы эквивалентности, анализ граничных значений. 

Для работы с БД (отслеживание изменений) использовался - DBeaver.

Использован Pytest для написания интеграционных тестов и создания тестовой бд.




### Запуск проекта на локальной машине:

- Клонировать репозиторий:
```
https://github.com/ElenaGlu/receipt_generation.git
cd service_receipt
```

### Запустите проект:

```
sudo docker compose up --build
```

